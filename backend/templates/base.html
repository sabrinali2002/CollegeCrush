<!DOCTYPE html>
<html>

<head>
  <title>College Crush</title>
  <link rel="stylesheet" href="../static/style.css">
</head>

<body>
  <header>
    <h1>College Crush</h1>
  </header>
  <main>
    <h2>Find Your Perfect College Match</h2>
    <form>
      <div class="input-box" onclick="sendFocus()">
        <img src="{{ url_for('static', filename='images/mag.png') }}" />
        <input placeholder="Enter your preferred college vibe!" id="filter-text-val" onkeyup="filterText()">
      </div>
      <!-- <div class="q1">
        <label for="major">Select your preferred major:</label>
        <select id="major">
          <option value="">Choose One</option>
          <option value="agriculture">Agriculture & Operations</option>
          <option value="gender-studies">Area, Ethnic, Cultural, & Gender Studies</option>
          <option value="biological-sciences">Biological & Biomedical Sciences</option>
          <option value="business">Business</option>
          <option value="Chemistry">Chemistry</option>

          <option value="communications">Communications</option>
          <option value="computer-science">Computer & Information Sciences</option>
          <option value="education">Education</option>
          <option value="engineering">Engineering</option>
          <option value="health-medicine">Health & Medicine</option>
          <option value="history">History</option>
          <option value="language">Languages, Literatures, & Linguistics</option>
          <option value="law">Legal Professions & Studies</option>
          <option value="Music">Music</option>
          <option value="Nursing">Nursing</option>
          <option value="Philosophy">Philosophy</option>
          <option value="Psychology">Psychology</option>
        </select> <br><br>
      </div> -->

      <!-- <div class="q01">
        <label for="gpa">Select your GPA:</label>
        <select id="gpa" name="gpa">
          <option value="">Choose One</option>
          <option value="4.0">4.0</option>
          <option value="3.7">3.7</option>
          <option value="3.5">3.5</option>
          <option value="3.3">3.3</option>
          <option value="3.0">3.0</option>
          <option value="2.7">2.7</option>
          <option value="2.5">2.5</option>
          <option value="2.3">2.3</option>
          <option value="2.0">2.0</option>
          <option value="1.7">1.7</option>
          <option value="1.5">1.5</option>
          <option value="1.3">1.3</option>
          <option value="1.0">1.0</option>
        </select> <br><br>
      </div> -->

      <div class="q2">
        <label for="location">Select Your Preferred Region:</label>
        <select id="location-input">
          <option value="">Choose One</option>
          <option value="northeast">Northeast</option>
          <option value="southeast">Souththeast</option>
          <option value="midwest">Midwest</option>
          <option value="southwest">Southwest</option>
          <option value="west">West</option>
        </select> <br><br>
      </div>
      <div class="q3">
        <label for="city">Select Your Preferred State or City:</label>
        <input placeholder="Search for your ideal college match!" id="state">
            <br><br>
        </div>

      <div class=" q3">
        <label for="size">Select Your Preferred School Size:</label>
        <select id="size">
          <option value="">Choose One</option>
          <option value="small">Small (under 5,000 students)</option>
          <option value="medium">Medium (5,000-15,000 students)</option>
          <option value="large">Large (over 15,000 students)</option>
        </select> <br><br>
      </div>
      <!-- <div class="q01">
        <label for="gpa">Select your preffered college setting:</label>
        <select id="gpa" name="gpa">
          <option value="">Choose One</option>
          <option value="4.0">Urban</option>
          <option value="3.7">Suburban</option>
          <option value="3.5">Rural</option>
        </select> <br><br>
      </div> -->
      <div class=" q5">
        <label for="sort_input">Sort By:</label>
        <select id="sort_input">
          <option value="">Choose One</option>
          <option value="Alphabetical">Alphabetical</option>
          <option value="Location">Location</option>
          <option value="Enrollment Size">Enrollment Size</option>
        </select> <br><br>
      </div>
      <!-- <div class="q4">
        <div class="size-slider">
          <label for="priceRange">College Price Range:</label>
          <input type="range" min="0" max="50000" step="100" value="25000" class="slider" id="priceRange">
        </div>
        <div class="price-display">
          <br>
          <label for="priceDisplay">Price Display:</label>
          <input type="text" id="priceDisplay" readonly>

          <script>
            // Get the slider and display elements
            var slider = document.getElementById("priceRange");
            var display = document.getElementById("priceDisplay");

            // Update the display value when the slider is moved
            slider.oninput = function () {
              display.value = "$" + this.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }    
          </script>
        </div> -->
      <!-- <br>
      </div> -->
      <!-- <div class="q3">
        <label for="city">Input Your Preferred State or City:</label>
        <input placeholder="Search for your ideal college match!" id="filter-text-val"">
            <br><br>
        </div>
        <div class=" q5">
        <label for="sort_input">Sort By:</label>
        <select id="sort_input">
          <option value="">Choose One</option>
          <option value="Alphabetical">Alphabetical</option>
          <option value="Location">Location</option>
          <option value="Enrollment Size">Enrollment Size</option>
        </select> <br><br>
      </div> -->
    </form>
    <button type="submit" onclick="filterText()">Find My Matches</button>
    <br>
    <div id="answer-box">

    </div>
  </main>
  <footer>
    <p>&copy; College Crush 2023</p>
  </footer>
  <script>

    function answerBoxTemplate(title, location, enrolled, website,score) {
      return `<div><div>
                <h2 class='episode-title'>${title}</h2>
                <h4> Location: ${location}</h4>
                <h4> Students enrolled: ${enrolled}</h5>  
                <a href="${website}">Learn More!</a>    
                <h4> Match Score: ${score}</h4>
                <br>
  </div>
  </div>`
    }
    function answerBoxTemplate2(messages) {
      return `<div><div>
                <h2>${messages}</h2> 
  </div>
  </div>`
    }

    function sendFocus() {
      document.getElementById('filter-text-val').focus()
    }
    function filterText() {
      document.getElementById("answer-box").innerHTML = ""
      console.log(document.getElementById("filter-text-val").value)
      fetch("/colleges?" + new URLSearchParams({
        title: document.getElementById("state").value, size: document.getElementById("size").value,
        location: document.getElementById("location-input").value, sort: document.getElementById("sort_input").value,
        vibes: document.getElementById("filter-text-val").value
      }).toString())
        .then((response) => response.json())
        .then((data) => {
          data.forEach(row => {
            let tempDiv = document.createElement("div")
            // console.log(row.title)
            if (row.title === undefined) {
              //tempDiv.innerHTML = answerBoxTemplate(row.title, row.location, row.enrolled, row.website)
              tempDiv.innerHTML = answerBoxTemplate2(row.messages)
            }
            else { tempDiv.innerHTML = answerBoxTemplate(row.title, row.location, row.enrolled, row.website, 0) }
            document.getElementById("answer-box").appendChild(tempDiv)
          });
        });
    }

  </script>
</body>

</html>